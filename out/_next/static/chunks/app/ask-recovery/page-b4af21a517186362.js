(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{18252:(e,s,t)=>{Promise.resolve().then(t.bind(t,14388))},14990:(e,s,t)=>{"use strict";var a=t(64642);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},14388:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>T});var a=t(98339),r=t(58563),n=t(54871),o=t(26296),c=t(24996),i=t(8890),l=t(77427),d=t(1492),h=t(79755),u=t(10133);function m(e){let{safeAddress:s,onExternalLink:t,onSafeAddressChange:r,error:m,chainId:x,onChainIdChange:p}=e,f=(0,h.Q)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"font-roboto-mono font-bold text-base text-content-foreground",children:"Safe Address"}),(0,a.jsx)("p",{className:"mt-3 mb-5 font-roboto-mono text-sm text-content-foreground opacity-60",children:"The address of the account that need to be recovered."}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(o.p,{placeholder:"Address...",className:(0,l.cn)(i.r.input,"flex-1"),value:s,onChange:e=>r(e.target.value)}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-background group",onClick:()=>s&&t(s),type:"button",children:(0,a.jsx)(n.A,{size:16,className:"opacity-50 group-hover:opacity-100"})})]}),m&&(0,a.jsx)("p",{className:(0,l.cn)(i.r.textError,"text-sm"),children:m}),(0,a.jsx)("div",{className:"h-6"}),(0,a.jsx)("p",{className:"font-roboto-mono font-bold text-base text-content-foreground",children:"Safe Address Chain"}),(0,a.jsx)("p",{className:"mt-3 mb-5 font-roboto-mono text-sm text-content-foreground opacity-60",children:"Select the chain where the safe address is deployed."}),(0,a.jsxs)(d.l6,{value:x,onValueChange:e=>{p(e)},children:[(0,a.jsx)(d.bq,{className:"w-40 border-none focus:ring-primary text-foreground",children:(0,a.jsx)(d.yv,{})}),(0,a.jsx)(d.gC,{className:"bg-background border-none",children:(0,a.jsx)(d.s3,{children:f.map(e=>(0,a.jsx)(d.eb,{className:"hover:bg-content-background hover:cursor-pointer",value:e.id.toString(),children:(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(u.PW,{id:e.id,size:24}),e.name]})},e.id))})})]})]})}var x=t(8325);function p(e){let{newOwners:s,onAdd:t,onRemove:r,onExternalLink:n,validationFn:o}=e;return(0,a.jsx)(x.A,{addresses:s,onAdd:t,onRemove:r,onExternalLink:n,validationFn:o})}function f(e){let{totalOwners:s,isNewThreshold:t,currentThreshold:r,onThresholdChange:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.p,{type:"number",min:1,max:s,defaultValue:r||1,className:"w-40 border-none text-base focus:ring-primary",onChange:e=>{n(Math.min(Math.max(parseInt(e.target.value),1),s))}}),(0,a.jsx)("p",{className:"text-xs font-roboto-mono font-medium opacity-60 mt-2",children:t?"You will now have ".concat(s," owners. Choose a threshold between 1 and ").concat(s,"."):"".concat(s," owners added. Choose a threshold between 1 and\n        ").concat(s,".")})]})}var b=t(67939);function g(e){let{newOwners:s,threshold:t,safeAddress:r}=e;return(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-start",children:[(0,a.jsx)("div",{className:"w-2 min-h-max border-l-2 border-solid border-white opacity-20"}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)(b.A,{title:"Target Safe Account",description:"The address of the account that need to be recovered.",addresses:[r]}),(0,a.jsx)(b.A,{title:"Safe Account New Signers",description:"The public address of the new Safe signers.",addresses:s.map(e=>e.address)}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:i.r.modalSectionTitle,children:"Safe Account New Threshold"}),(0,a.jsxs)("p",{className:i.r.modalSectionDescription,children:["Minimum ",t," signers to approve transactions."]})]})]})]}),(0,a.jsxs)("div",{className:"pt-3",children:[(0,a.jsx)("p",{className:"mb-3 text-lg font-bold font-roboto-mono text-alert",children:"Save Recovery Access Link"}),(0,a.jsx)("p",{className:"text-sm font-bold font-roboto-mono",children:"This unique link is the only way to access and manage this specific recovery process. Copy and store it securely."}),(0,a.jsxs)("p",{className:"text-sm font-roboto-mono opacity-60",children:["- Each recovery process has its own unique link"," "]}),(0,a.jsxs)("p",{className:"text-sm font-roboto-mono opacity-60",children:["- Share with guardians to track recovery progress"," "]}),(0,a.jsxs)("p",{className:"text-sm mb-3 font-roboto-mono opacity-60",children:["- Save a backup â€“"," ",(0,a.jsxs)("span",{className:"italic",children:["you","'","ll need to start over if this link is lost"]})]})]})]})}var v=t(14990),w=t(43899),j=t(45970),N=t(19914),y=t(51459),k=t(1801),S=t(75447),A=t(70459),C=t(62850);function T(){let e=(0,v.useRouter)(),[s,t]=(0,r.useState)(1),[n,o]=(0,r.useState)(""),[c,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(1),[u,x]=(0,r.useState)(""),{toast:b}=(0,C.dj)(),[T,I]=(0,r.useState)("1"),{chainId:L}=(0,S.F)(),R=(0,h.Q)(),{srm:E}=(0,k.u)({safeAddress:n,chainId:Number(T)}),O=E&&T?(0,j.g)({safeAddress:n,newThreshold:l,newOwners:c.map(e=>e.address),chainId:T}):"",{guardians:V,owners:q}=(0,N.k)(n,Number(T));(0,r.useEffect)(()=>{L&&R.map(e=>e.id).includes(L)&&1==s&&I(L.toString())},[L,R,I,s]);let F=1===s&&!n||2===s&&0===c.length,M=e=>{i(s=>[...s,e])},P=e=>{i(s=>s.filter((s,t)=>t!==e))},_=e=>{T&&window.open((0,A.C)(Number(T),e))},z=e=>{d(e)},D=(0,r.useCallback)(e=>(0,w.P)(e)?e===n?{isValid:!1,reason:"This safe address can't be an owner."}:V?V.includes(e)?{isValid:!1,reason:"Guardians can't be new owners."}:q?!function(e,s){if(e.length!==s.length)return!1;let t=[...e].map(e=>e.toLowerCase()).sort(),a=[...s].map(e=>e.toLowerCase()).sort();return t.every((e,s)=>e===a[s])}([...c.map(e=>e.address),e],q)?{isValid:!0,reason:""}:{isValid:!1,reason:"New owners exactly match old owners."}:{isValid:!1,reason:"Couldn't fetch owners."}:{isValid:!1,reason:"Couldn't fetch guardians."}:{isValid:!1,reason:"Insert a valid address."},[n,V,q,c]);return(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center mx-8",children:(0,a.jsx)(y.I,{title:(()=>{switch(s){case 1:return"Ask for Recovery";case 2:return"Safe Account New Signers";case 3:return"Safe Account New Threshold";case 4:return"Summary";default:return""}})(),description:(()=>{switch(s){case 1:return"Start the recovery process to transfer account ownership through trusted contacts. New Owners approval will be required for the recovery to succeed.";case 2:return"Add the wallet addresses of the new authorized signers for the target Safe account.";case 3:return"Set a new threshold for the target Safe account. This number determines how many signers must approve each transaction after recovery is complete.";case 4:return"Review the details of your recovery request and save the tracking link.";default:return""}})(),currentStep:s,totalSteps:4,onNext:()=>{switch(s){case 1:if(!(0,w.P)(n)){x("Insert a valid address.");break}if(!V||!V.length){x("Couldn't fetch guardians. Maybe this safe address has no guardians on the selected chain.");break}x(""),t(e=>e+1);break;case 2:t(e=>e+1);break;case 3:t(e=>e+1);break;case 4:navigator.clipboard.writeText(O),b({title:"Copeid to clipboard!",description:O.length>40?"".concat(O.slice(0,20),"...").concat(O.slice(-20)):O})}},onBack:()=>{s>1&&(4===s?e.push(O):t(e=>e-1))},backLabel:4!==s?"Back":"Details",nextLabel:4===s?"Copy Link":3==s?"Finish and Review":"Next",isNextDisabled:F,isProgress:4!==s,children:(()=>{switch(s){case 1:return(0,a.jsx)(m,{safeAddress:n,onSafeAddressChange:o,onExternalLink:_,error:u,chainId:T,onChainIdChange:e=>I(e)});case 2:return(0,a.jsx)(p,{newOwners:c,onAdd:M,onExternalLink:_,onRemove:P,validationFn:D});case 3:return(0,a.jsx)(f,{totalOwners:c.length,onThresholdChange:z});case 4:return(0,a.jsx)(g,{newOwners:c,threshold:l,safeAddress:n,onAdd:M,onExternalLink:_,onRemove:P});default:return""}})()})})}},67939:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(98339),r=t(8890),n=t(70459),o=t(54871);t(58563);var c=t(75447),i=t(67341),l=t.n(i);function d(e){let{title:s,description:t,addresses:i}=e,{chainId:d}=(0,c.F)();return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:r.r.modalSectionTitle,children:s}),t&&(0,a.jsx)("p",{className:r.r.modalSectionDescription,children:t}),(0,a.jsx)("div",{className:"inline-flex flex-col space-y-2",children:i.map(e=>(0,a.jsx)(l(),{href:(0,n.C)(null!=d?d:1,e),target:"_blank",children:(0,a.jsxs)("div",{className:"items-center gap-2 bg-terciary inline-flex justify-between py-0.5 px-2 rounded-md hover:cursor-pointer",children:[(0,a.jsx)("p",{className:"text-primary font-roboto-mono font-medium text-xs",children:e}),(0,a.jsx)(o.A,{size:12,className:"text-primary hover:font-bold"})]},e)},e))})]})}},51459:(e,s,t)=>{"use strict";t.d(s,{I:()=>c});var a=t(98339),r=t(77427),n=t(64725),o=t(24996);function c(e){let{title:s,description:t,children:c,currentStep:i,totalSteps:l,isProgress:d,onBack:h,onNext:u,nextLabel:m="Next",backLabel:x="Back",isNextDisabled:p=!1,isBackDisabled:f=!1}=e;return(0,a.jsx)("div",{className:"flex flex-col gap-4 flex-1 max-w-2xl mx-auto bg-content-background rounded-3xl p-6 mb-16",children:(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{children:[d&&(0,a.jsx)("div",{className:"flex gap-2 mb-8 pr-5",children:Array.from({length:l},(e,s)=>(0,a.jsx)(n.A,{isSelected:s+1===i},s))}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold font-roboto-mono",children:s}),t&&(0,a.jsx)("p",{className:"text-base font-medium opacity-60 font-roboto-mono",children:t})]})]}),c&&(0,a.jsx)("div",{className:"flex-1",children:c}),(0,a.jsx)("div",{className:(0,r.cn)("flex",d?"justify-end":"justify-center"),children:(h||u)&&(0,a.jsxs)("div",{className:"flex gap-3",children:[h&&1!==i&&(0,a.jsx)(o.$,{variant:"outline",onClick:h,disabled:f,className:"px-6 py-2",children:x}),u&&(0,a.jsx)(o.$,{onClick:u,disabled:p,className:"px-6 py-2",children:m})]})})]})})}},45970:(e,s,t)=>{"use strict";t.d(s,{g:()=>a,l:()=>r});let a=e=>{let s="";{let e=window.location.protocol,t=window.location.host;s="".concat(e,"//").concat(t)}let t=new URLSearchParams;return t.append("safeAddress",e.safeAddress),t.append("newOwners",e.newOwners.join(",")),t.append("newThreshold",e.newThreshold.toString()),t.append("chainId",e.chainId),"".concat(s,"/manage-recovery/dashboard#").concat(t.toString())},r=e=>{try{let s=e.split("#")[1];if(!s)return!1;let t=new URLSearchParams(s),a=t.get("safeAddress"),r=t.get("newOwners"),n=t.get("newThreshold"),o=t.get("chainId");if(!a||!r||!n||!o)return!1;let c=r.split(",");if(0===c.length)return!1;let i=parseInt(n,10);if(isNaN(i)||i<=0||i>c.length)return!1;return!0}catch(e){return console.error("Error validating link:",e),!1}}},54871:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(44090).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[401,835,264,341,1,270,789,865,358],()=>s(18252)),_N_E=e.O()}]);