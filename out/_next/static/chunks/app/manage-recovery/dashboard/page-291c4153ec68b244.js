(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{21087:(e,r,t)=>{Promise.resolve().then(t.bind(t,62529))},62529:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ri});var s={};t.r(s),t.d(s,{UC:()=>e4,B8:()=>e3,bL:()=>e2,l9:()=>e6});var a=t(98339),n=t(60352),o=t(58563),i=t(77427),l=t(54871),d=t(44090);let c=(0,d.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var u=t(24996);function h(e){let{icon:r,onClick:t,size:s=24,className:n="",ariaLabel:o}=e;return(0,a.jsx)(u.$,{variant:"ghost",onClick:t,className:(0,i.cn)("p-2 hover:bg-gray-100/10",n),"aria-label":o,children:(0,a.jsx)(r,{size:s})})}var x=t(67341),m=t.n(x),f=t(70459);function p(e){let{guardian:r,isNewGuardianList:t,onRemoveGuardian:s,chainId:n}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,3fr,1fr] items-center py-2 px-3 bg-background rounded-lg",children:[(0,a.jsx)("div",{className:"text-xs text-foreground opacity-60 font-medium font-roboto-mono",children:r.nickname}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"text-xs text-foreground opacity-6g0 font-medium font-roboto-mono",children:r.address}),(0,a.jsx)(m(),{href:(0,f.C)(null!=n?n:1,r.address),target:"_blank",children:(0,a.jsx)(h,{icon:l.A,onClick:()=>{},size:14,className:"opacity-60 hover:opacity-100"})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:t?(0,a.jsxs)(u.$,{variant:"link",className:"flex items-center gap-1",onClick:()=>s(r),children:[(0,a.jsx)("span",{className:"font-roboto-mono text-xs text-primary font-bold",children:"Remove Guardian"}),(0,a.jsx)("div",{className:"flex items-center justify-center rounded-full w-4 h-4 gap-2",style:{backgroundColor:"rgba(176, 238, 129, 0.1)"},children:(0,a.jsx)(c,{className:"text-primary w-3 "})})]}):(0,a.jsx)("span",{className:"px-4 py-1 bg-terciary text-terciary-foreground rounded-md text-xs",children:r.status})})]})}var v=t(8890),g=t(64725),y=t(87596);function j(e){let{isOpen:r,onClose:t,title:s,description:n,children:o,currentStep:l,totalSteps:d,isProgress:c,onBack:h,onNext:x,nextLabel:m="Next",backLabel:f="Back",isNextDisabled:p=!1,isBackDisabled:v=!1}=e;return(0,a.jsx)(y.lG,{open:r,onOpenChange:t,children:(0,a.jsx)(y.Cf,{className:"flex flex-col gap-4 flex-1 max-w-2xl bg-content-background border-none rounded-3xl",children:(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{children:[c&&(0,a.jsx)("div",{className:"flex gap-2 mb-8 pr-5",children:Array.from({length:d},(e,r)=>(0,a.jsx)(g.A,{isSelected:r+1===l},r))}),(0,a.jsxs)(y.c7,{children:[(0,a.jsx)(y.L3,{className:"text-xl font-bold font-roboto-mono",children:s}),n&&(0,a.jsx)(y.rr,{className:"text-base font-medium opacity-60 font-roboto-mono",children:n})]})]}),o&&(0,a.jsx)("div",{className:"flex-1",children:o}),(0,a.jsx)(y.Es,{className:(0,i.cn)(c?"sm:justify-end":"sm:justify-center"),children:(h||x)&&(0,a.jsxs)("div",{className:"flex gap-3",children:[h&&1!==l&&(0,a.jsx)(u.$,{variant:"outline",onClick:h,disabled:v,className:"px-6 py-2",children:f}),x&&(0,a.jsx)(u.$,{onClick:x,disabled:p,className:"px-6 py-2",children:m})]})})]})})})}var b=t(28368),w=t(26296),N=t(40099),A=t(1801),k=t(47250);let C="0x0000000000000000000000000000000000000000";var S=t(64584),T=t(23762),R=t(19914);async function E(e,r,t,s){let a=[];for(let n of t){let t={to:e.moduleAddress,data:(0,k.p)({abi:T.F,functionName:"revokeGuardianWithThreshold",args:[r,n,BigInt(s)]}),value:BigInt(0)};a.push(t)}return a.map(e=>({to:e.to,data:e.data,value:e.value}))}var I=t(31869),G=t(62850),D=t(75447);function F(e){let{guardians:r,isNewGuardianList:t,onRemoveGuardian:s,onOpenGuardianModal:n,resetQueries:l,linkChainId:d}=e,[c,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1),[m,g]=(0,o.useState)(),[y,w]=(0,o.useState)(1),[k,T]=(0,o.useState)(1),{chainId:F}=(0,D.F)(),O=null!=d?d:F,{trigger:P,isLoading:M,loadingMessage:q,cancel:B}=function(e){let{guardians:r,threshold:t,onSuccess:s,onError:a}=e,{srm:n}=(0,A.u)(),{guardians:i}=(0,R.k)(),l=(0,o.useCallback)(async()=>{if(!r)throw Error("Missing guardians");if(void 0===t)throw Error("Missing threshold");if(!n)throw Error("Missing srm");if(!i)throw Error("Missing currentGuardians");let e="".concat(C.slice(0,-1),"1");return await E(n,e,r,t)},[r,t,n,i]);return(0,S.n)({buildTxFn:l,onSuccess:s,onError:a})}({guardians:[null==m?void 0:m.address],threshold:h?0:k,onSuccess:()=>{(0,G.oR)({title:"Guardian removed.",description:"This address will no longer be a guardian."}),u(!1),x(!1),g({nickname:"",address:""}),w(1),l()}}),z=e=>{T(e)},W=e=>{if(g(e),1===r.length){x(!0);return}u(!0)},K=()=>{m&&s&&s(m),P()},_=e=>{window&&O&&window.open((0,f.C)(Number(O),e))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:(0,i.cn)(v.r.label,"grid grid-cols-[1fr,3fr,1fr] gap-4"),children:[(0,a.jsx)("div",{children:"NICKNAME"}),(0,a.jsx)("div",{children:"ADDRESS"}),!t&&(0,a.jsx)("div",{className:"text-right mr-4",children:"APPROVAL"})]}),(0,a.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,a.jsx)(p,{guardian:e,isNewGuardianList:t,onRemoveGuardian:()=>W(e),chainId:O},e.nickname))})]}),(0,a.jsx)(j,{isOpen:c,onClose:()=>u(!1),title:(()=>{switch(y){case 1:return"Remove Guardian";case 2:return"Define New Threshold";case 3:return"Review and Confirm Removal";default:return""}})(),description:(()=>{switch(y){case 1:return"Removing a guardian will reduce the number of trusted accounts protecting your account. To proceed, you will need to adjust the threshold required for approvals.";case 2:return"Set a new threshold for recover approvals. The threshold determines how many guardians are required to approve recover actions.";default:return""}})(),currentStep:y,totalSteps:3,isProgress:!0,onNext:()=>{y<3?w(e=>e+1):K()},onBack:()=>{y>1&&w(e=>e-1)},isNextDisabled:M,nextLabel:2===y?"Finish and review":3===y?"Confirm Removal":"Next",children:(()=>{switch(y){case 1:return(0,a.jsx)("div",{className:"space-y-5",children:(0,a.jsx)(L,{nickname:(null==m?void 0:m.nickname)||"",address:(null==m?void 0:m.address)||"",onExternalLink:()=>(null==m?void 0:m.address)&&_(m.address)})});case 2:return(0,a.jsx)(b.A,{totalGuardians:r.length-1,currentThreshold:k,onThresholdChange:z,isNewThreshold:!0});case 3:return(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("span",{className:"text-lg font-bold font-roboto-mono opacity-60",children:"Guardians to be removed"}),(0,a.jsx)("div",{className:"space-y-5",children:(0,a.jsx)(L,{nickname:(null==m?void 0:m.nickname)||"",address:(null==m?void 0:m.address)||"",onExternalLink:()=>(null==m?void 0:m.address)&&_(m.address)})}),(0,a.jsx)(N.A,{threshold:k})]});default:return""}})()}),(0,a.jsx)(j,{isOpen:h,onClose:()=>x(!1),title:"Are you sure you want to remove this guardian?",description:"Removing the last guardian will leave your account unprotected, interrupt any ongoing recovery processes, and block future recovery attempts.",currentStep:2,totalSteps:1,onNext:n,onBack:K,nextLabel:"Add Guardians",backLabel:"Confirm Removal",isNextDisabled:M,children:(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("p",{className:"text-base font-bold font-roboto-mono",children:"We strongly recommend adding a new guardian before proceeding."}),(0,a.jsx)(L,{nickname:(null==m?void 0:m.nickname)||"",address:(null==m?void 0:m.address)||"",onExternalLink:()=>(null==m?void 0:m.address)&&_(m.address)})]})}),(0,a.jsx)(I.A,{loading:M,loadingText:q,onCancel:B})]})}function L(e){let{nickname:r,address:t,onExternalLink:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,2fr]",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("label",{className:"text-sm font-bold font-roboto-mono opacity-50",children:"NICKNAME"})}),(0,a.jsx)("label",{className:"text-sm font-bold opacity-50 font-roboto-mono ml-2",children:"ADDRESS"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,2fr] gap-2",children:[(0,a.jsx)(w.p,{readOnly:!0,value:r,className:v.r.input}),(0,a.jsxs)("div",{className:"flex flex-1 gap-2 items-center",children:[(0,a.jsx)(w.p,{readOnly:!0,value:t,className:(0,i.cn)(v.r.input,"flex-1")}),(0,a.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-background group",onClick:s,type:"button",children:(0,a.jsx)(l.A,{size:16,className:"opacity-50 group-hover:opacity-100"})})]})]})]})}var O=t(7188),P=t(65586),M=t(40306),q=t(40807),B=t(86936),z=t(65403);async function W(e,r,t,s,a,n){let o=[];for(let[r,t]of a.entries()){let s="".concat(C.slice(0,-1),"1"),n={to:e.moduleAddress,data:(0,k.p)({abi:T.F,functionName:"revokeGuardianWithThreshold",args:[s,t,BigInt(a.length-r-1)]}),value:BigInt(0)};o.push(n)}return[...o,...await (0,B.t)(r,t,s,a,0,n)].map(e=>({to:e.to,data:e.data,value:e.value}))}async function K(e,r){let t=e.createChangeThresholdMetaTransaction(BigInt(r));return[{to:t.to,data:t.data,value:t.value}]}var _=t(41520);let $={[_.jA.After3Minutes]:1,[_.jA.After3Days]:3,[_.jA.After7Days]:7,[_.jA.After14Days]:14},U={1:"3-minute",3:"3-day",7:"7-day",14:"14-day"};function V(e){let{guardians:r,threshold:t,delayPeriod:s,onThresholdChange:n,onDelayPeriodChange:l}=e,[d,c]=(0,o.useState)(!1),[h,x]=(0,o.useState)(1),[m,f]=(0,o.useState)(t),[p,g]=(0,o.useState)(s),[y,w]=(0,o.useState)(""),{threshold:N}=(0,R.k)(),{srm:k}=(0,A.u)(),C=p!==(k&&$[k.moduleAddress])||m!==N,{toast:T}=(0,G.dj)(),{trigger:E,isLoading:F,loadingMessage:L,cancel:O}=function(e){let{threshold:r,delayPeriod:t,onSuccess:s,onError:a}=e,{address:n}=(0,D.F)(),{data:i}=(0,M.G)(),l=(0,q.e)(),{srm:d}=(0,A.u)(),c=t?z.v[t]:void 0,{srm:u}=(0,A.u)({srmAddress:c}),{guardians:h}=(0,R.k)(),x=(0,o.useCallback)(async()=>{if(!n||!i||!l||!r||!t||!d||!u||!h||!h.length)throw Error("Missing params");return d.moduleAddress===u.moduleAddress?await K(d,r):W(d,u,l,n,h,r)},[n,l,i,h,r,d,u,t]);return(0,S.n)({buildTxFn:x,onSuccess:s,onError:a})}({threshold:m,delayPeriod:p,onSuccess:()=>{n(m),l(p),T({title:"Parameters updated",description:"Your recovery parameters have been successfully updated."}),c(!1),x(1),w("")}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8 mt-12",children:[(0,a.jsx)("h3",{className:"text-lg font-bold font-roboto-mono text-primary",children:"Recovery Parameters"}),(0,a.jsx)(u.$,{className:"rounded-xl font-roboto-mono h-7 text-xs",onClick:()=>c(!0),children:"Update Parameters"})]}),(0,a.jsxs)("div",{className:"flex gap-4 my-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:v.r.label,children:"DELAY PERIOD"}),(0,a.jsxs)("span",{style:v.r.textWithBorderOpacity,className:v.r.textWithBorder,children:[U[s]," period."]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:v.r.label,children:"THRESHOLD"}),(0,a.jsxs)("span",{style:v.r.textWithBorderOpacity,className:v.r.textWithBorder,children:[t," of ",r.length," Guardians"]})]})]}),(0,a.jsx)(j,{isOpen:d,onClose:()=>{f(t),g(s),x(1),c(!1)},title:1===h?"Set the new Approval Threshold":"Set the new Recovery Delay Period",description:1===h?"Threshold determines the minimum number of guardian approvals required to recover your account.":"Set the time period during which you can cancel a initiated recovery request. We recommend a period of at least 3 days.",currentStep:h,totalSteps:2,isProgress:!0,onNext:()=>{if(h<2){x(e=>e+1);return}if(!C){w("Please, change at least one of the parameters to continue.");return}E()},onBack:()=>{w(""),h>1&&x(e=>e-1)},nextLabel:2===h?"Update parameters":"Next",children:(()=>{switch(h){case 1:return(0,a.jsx)(b.A,{totalGuardians:r.length,currentThreshold:m,onThresholdChange:f});case 2:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.A,{delayPeriod:p,onDelayPeriodChange:g}),y&&(0,a.jsx)("p",{className:(0,i.cn)(v.r.textError,"text-sm mt-5"),children:y})]});default:return""}})()}),(0,a.jsx)(I.A,{loading:F,loadingText:L,onCancel:O})]})}var H=t(91677);let Q="rounded-xl font-roboto-mono h-7 font-bold text-xs";function Y(e){let{threshold:r,delayPeriod:t,onThresholdChange:s,onDelayPeriodChange:n,resetQueries:i}=e,[l,d]=(0,o.useState)(!1),[c,h]=(0,o.useState)([]),[x,m]=(0,o.useState)(1),{guardians:p,threshold:v}=(0,R.k)(),{address:g,chainId:y}=(0,D.F)(),w=y&&g?(0,H.kR)(y,g.toLowerCase()):void 0,A=p&&p.map((e,r)=>{var t;return{nickname:null!==(t=(0,H.cL)(e,w))&&void 0!==t?t:"Guardian ".concat(r+1),address:e}}),{toast:k}=(0,G.dj)(),{trigger:C,isLoading:S,loadingMessage:T,cancel:E}=(0,B.r)({guardians:c.map(e=>e.address),threshold:r,onSuccess:()=>{i(),y&&g&&(0,H.KV)([...null!=A?A:[],...c],y,g),k({title:"Guardian added.",description:"Your new guardian will now be part of your account recovery setup."}),d(!1)}}),L=()=>{d(!0)},P=e=>{h(r=>[...r,e])},M=e=>{h(r=>r.filter((r,t)=>t!==e))},q=e=>{window&&y&&window.open((0,f.C)(Number(y),e))},z=e=>{s(e)};return(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("div",{className:"p-6 bg-content-background shadow-lg rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-bold font-roboto-mono text-primary ",children:"Account Guardians"}),A&&A.length>0&&(0,a.jsx)(u.$,{className:Q,onClick:L,children:"Add Guardian"})]}),A&&A.length>0?(0,a.jsx)(F,{guardians:A,isNewGuardianList:!0,onOpenGuardianModal:L,resetQueries:i}):(0,a.jsx)(J,{}),v&&A?(0,a.jsx)(V,{guardians:A,delayPeriod:t,threshold:v,onDelayPeriodChange:n,onThresholdChange:s}):void 0]}),(0,a.jsx)(j,{isOpen:l,onClose:()=>d(!1),title:(()=>{switch(x){case 1:return"Add Guardian";case 2:return"Define New Threshold";case 3:return"Review and Confirm Addition";default:return""}})(),description:(()=>{switch(x){case 1:return"Youâ€™re about to add a new guardian to your account recovery setup. This guardian will be able to help recover your account in case of credential loss.";case 2:return"Set a new threshold for recover approvals. The threshold determines how many guardians are required to approve recover actions.";default:return""}})(),currentStep:x,totalSteps:3,isProgress:!0,onNext:()=>{A&&(x<3?m(e=>e+1):C())},onBack:()=>{x>1&&m(e=>e-1)},nextLabel:2===x?"Finish and review":3===x?"Add Guardian":"Next",isNextDisabled:1===x&&0===c.length||3===x&&S,children:(()=>{switch(x){case 1:return(0,a.jsx)(O.A,{guardians:c,onAddGuardian:P,onRemoveGuardian:M,onExternalLink:q});case 2:return(0,a.jsx)(a.Fragment,{children:A&&(0,a.jsx)(b.A,{totalGuardians:A.length+c.length,currentThreshold:r,onThresholdChange:z,isNewThreshold:!0})});case 3:return(0,a.jsx)("div",{className:"space-y-5",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg font-bold font-roboto-mono opacity-60",children:"New NewAddress"}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(O.A,{guardians:c,onAddGuardian:P,onRemoveGuardian:M,onExternalLink:q,isReview:!0})}),(0,a.jsx)(N.A,{threshold:r})]})});default:return""}})()}),(0,a.jsx)(I.A,{loading:S,loadingText:T,onCancel:E})]})}function J(){return(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center text-sm font-roboto-mono text-center text-content-foreground",children:[(0,a.jsx)("span",{className:"opacity-60 font-bold",children:"No Guardians added."}),(0,a.jsx)("p",{className:"mt-1 mb-5 max-w-xs opacity-60",children:"Start protecting your account by adding trusted guardians."}),(0,a.jsx)(m(),{href:"/protect-account",children:(0,a.jsx)(u.$,{className:Q,children:"Add Guardian"})})]})}var X=t(64348);function Z(){return(0,a.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:(0,a.jsx)("div",{className:"fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]",children:(0,a.jsx)(X.A,{className:"flex flex-1 items-center justify-center"})})})}var ee=t(67939);let er=(0,d.A)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),et=(0,d.A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function es(e){let{safeAccount:r,safeSigners:t,isChecked:s,isLastGuardianToConfirm:n,delayPeriod:o,handleCheckToggle:i}=e;return(0,a.jsxs)("div",{className:"space-y-7",children:[(0,a.jsx)(ee.A,{title:"Safe Address",description:"The address of the account that need to be recovered.",addresses:[r]}),t&&(0,a.jsx)(ee.A,{title:"Safe Signers",description:"The public address of the new Safe signers.",addresses:t}),n&&(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:i,role:"checkbox","aria-checked":s,children:[s?(0,a.jsx)(er,{size:16,className:"text-primary"}):(0,a.jsx)(et,{size:16,className:"text-primary"}),(0,a.jsxs)("span",{className:"text-content-foreground font-roboto-mono text-sm",children:["Start the ",o," delay period now."]})]})]})}function ea(e){let{linkValue:r,linkError:t,onLinkChange:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-center self-center my-12 max-w-xs mx-auto",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-primary font-roboto-mono",children:"Recovery Link Required"}),(0,a.jsx)("p",{className:"text-xs opacity-60 font-roboto-mono mt-1 mb-5",children:"Recovery processes can only be accessed with their unique tracking links. Enter the link for the recovery you want to view."}),(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(w.p,{className:"border rounded-sm text-xs bg-content-background font-medium font-roboto-mono opacity-60 h-6",value:r,onChange:s,placeholder:"http://"}),(0,a.jsx)(m(),{href:r,children:(0,a.jsx)(u.$,{className:"text-xs h-6",children:"Enter"})})]}),t&&(0,a.jsx)("p",{className:(0,i.cn)(v.r.textError,"text-xs mt-2 self-start"),children:t})]})}function en(e){let{isOpen:r,setIsOpen:t,safeAddress:s,newOwners:n,newThreshold:o}=e;return(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center mx-8",children:(0,a.jsx)(j,{isOpen:r,onClose:()=>t(!1),title:"Successful recovery!",description:"The recovery process was approved and it's being executed. The signers will be updated in a few seconds.",currentStep:1,totalSteps:1,onNext:()=>{t(!1)},nextLabel:"Close",isNextDisabled:!1,isProgress:!1,children:(0,a.jsx)("div",{className:"space-y-5",children:(0,a.jsxs)("div",{className:"flex flex-row justify-start",children:[(0,a.jsx)("div",{className:"w-2 min-h-max border-l-2 border-solid border-white opacity-20"}),(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)(ee.A,{title:"Safe Account",addresses:[s]}),(0,a.jsx)(ee.A,{title:"New Signers",addresses:n}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:v.r.modalSectionTitle,children:"New Threshold"}),(0,a.jsxs)("p",{className:v.r.modalSectionDescription,children:["Minimum ",o," signers to approve transactions."]})]})]})]})})})})}function eo(e){let{safeSigners:r,safeThreshold:t,safeAddress:s,newOwners:n,newThreshold:i,delayPeriod:l,isLinkRequired:d,approvalsInfo:c,recoveryInfo:h,resetQueries:x,chainId:m}=e,[f,p]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(""),[N,k]=(0,o.useState)(""),[C,T]=(0,o.useState)(!1),{toast:E}=(0,G.dj)(),{address:L}=(0,D.F)(),O=!!(null==h?void 0:h.guardiansApprovalCount)||!!((null==c?void 0:c.totalGuardianApprovals)&&c.guardiansThreshold&&c.totalGuardianApprovals>=c.guardiansThreshold),P=L&&!(null==h?void 0:h.newThreshold)&&c&&c.pendingGuardians.includes(L),B=P&&c.guardiansThreshold&&c.totalGuardianApprovals===c.guardiansThreshold-1,{executeAfter:z}=null!=h?h:{},W=!!z&&0!==z&&Date.now()/1e3<z,K=!!z&&0!==z&&Date.now()/1e3>=z,{guardiansApprovals:_}=null!=c?c:{},$=_&&(W||K)?_.map(e=>({...e,status:"Approved"})):_,{trigger:U,isLoading:V,cancel:H}=function(e){let{safeAddress:r,newOwners:t,newThreshold:s,shouldExecute:a,onSuccess:n,onError:i}=e,{address:l}=(0,D.F)(),{data:d}=(0,M.G)(),c=(0,q.e)(),{srm:u}=(0,A.u)({safeAddress:r}),{guardians:h}=(0,R.k)(r),x=(0,o.useCallback)(async()=>{if(!r)throw Error("Safe address is required");if(!t||0===t.length)throw Error("New owners array is required and cannot be empty");if(void 0===s||s<=0)throw Error("New threshold must be greater than 0");if(!l||!d||!c)throw Error("Missing signer or client");if(!h||!Object(h).includes(l))throw Error("Caller must be a guardian");if(!u)throw Error("srm not available");let e=u.createConfirmRecoveryMetaTransaction(r,t,s,a);return[{to:e.to,data:e.data,value:e.value}]},[r,t,s,a,l,h,d,c,u]);return(0,S.n)({buildTxFn:x,onSuccess:n,onError:i})}({safeAddress:s,newOwners:n,newThreshold:i,shouldExecute:g,onSuccess:()=>{if(x(),!B){E({title:"Recovery approved.",description:"Waiting for other guardians to approve before starting the delay period."});return}if(!g){E({title:"Recovery approved.",description:"The threshold was achieved. Click to start delay period."});return}}}),{trigger:Q,isLoading:Y,cancel:J}=function(e){let{safeAddress:r,newOwners:t,newThreshold:s,onSuccess:a,onError:n}=e,{address:i}=(0,D.F)(),{data:l}=(0,M.G)(),d=(0,q.e)(),{srm:c}=(0,A.u)({safeAddress:r}),u=(0,o.useCallback)(async()=>{if(!r)throw Error("Safe address is required");if(!t||0===t.length)throw Error("New owners array is required and cannot be empty");if(void 0===s||s<=0)throw Error("New threshold must be greater than 0");if(!i||!l||!d||!c)throw Error("Missing signer, srm or client");let e=c.createExecuteRecoveryMetaTransaction(r,t,s);return[{to:e.to,data:e.data,value:e.value}]},[r,t,s,i,l,d,c]);return(0,S.n)({buildTxFn:u,onSuccess:a,onError:n})}({safeAddress:s,newOwners:n,newThreshold:i,onSuccess:()=>{x(),E({title:"Recovery executed.",description:"Delay Period has started."})}}),{trigger:X,isLoading:Z,cancel:ee}=function(e){let{safeAddress:r,onSuccess:t,onError:s}=e,{address:a}=(0,D.F)(),{data:n}=(0,M.G)(),i=(0,q.e)(),{srm:l}=(0,A.u)({safeAddress:r}),d=(0,o.useCallback)(async()=>{if(!r)throw Error("Safe address is required");if(!a||!n||!i||!l)throw Error("Missing signer, srm or client");let e=l.createFinalizeRecoveryMetaTransaction(r);return[{to:e.to,data:e.data,value:e.value}]},[r,a,n,i,l]);return(0,S.n)({buildTxFn:d,onSuccess:t,onError:s})}({safeAddress:s,onSuccess:()=>{x(),T(!0)}});return(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)("div",{className:"p-6 bg-content-background shadow-lg rounded-xl",children:d?(0,a.jsx)(ea,{linkValue:N,linkError:b,onLinkChange:e=>{k(e.target.value),b&&w("")}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"text-lg font-bold font-roboto-mono text-primary",children:"Account Recovery"}),(0,a.jsxs)("div",{className:"flex gap-4 my-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:v.r.label,children:"DELAY PERIOD"}),(0,a.jsxs)("span",{style:v.r.textWithBorderOpacity,className:v.r.textWithBorder,children:[l," period."]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:v.r.label,children:"THRESHOLD"}),(0,a.jsxs)("span",{style:v.r.textWithBorderOpacity,className:v.r.textWithBorder,children:[null==c?void 0:c.guardiansThreshold," of"," ",null==c?void 0:c.guardiansApprovals.length," Guardians"]})]})]}),r&&t&&(0,a.jsx)(ei,{signers:r,threshold:t,chainId:m,isCurrent:!0}),n&&i&&(0,a.jsx)(ei,{signers:n,threshold:i,chainId:m}),(0,a.jsx)("h4",{className:"my-6 text-primary font-roboto-mono text-sm",children:"GUARDIANS APPROVAL"}),$&&(0,a.jsx)(F,{guardians:$,resetQueries:x,linkChainId:m}),(0,a.jsxs)("div",{className:"flex justify-end mt-4 mb-2 gap-2",children:[!(W||K)&&(0,a.jsx)(u.$,{className:"text-xs font-bold px-3 py-2 rounded-xl",disabled:!O,onClick:Q,children:"Start Delay Period"}),(W||K)&&(0,a.jsx)(u.$,{className:"text-xs font-bold px-3 py-2 rounded-xl",onClick:X,disabled:!K,children:"Finalize Recovery"}),(0,a.jsx)(u.$,{className:"text-xs font-bold px-3 py-2 rounded-xl",onClick:()=>p(!0),disabled:!P,children:"Approve Recovery"})]}),(0,a.jsx)("span",{className:"text-xs flex justify-end text-[10px] opacity-60",children:K?"Anyone can finalize the reocvery request.":"Only pending Guardians can approve this recovery request."}),(0,a.jsx)(j,{title:"Approve Recovery Request",description:"A recovery request has been started and your approval is required to proceed with the recovery. Review the details below and confirm if you approve.",currentStep:2,isOpen:f,totalSteps:1,onClose:()=>p(!1),onNext:()=>{p(!1),U()},onBack:()=>p(!1),nextLabel:"Approve",backLabel:"Cancel",children:s&&(0,a.jsx)(es,{handleCheckToggle:()=>{y(e=>!e)},delayPeriod:l,isChecked:g,safeAccount:s,safeSigners:r,isLastGuardianToConfirm:!!B})}),s&&n&&i?(0,a.jsx)(en,{isOpen:C,setIsOpen:T,safeAddress:s,newOwners:n,newThreshold:i}):void 0,(0,a.jsx)(I.A,{loading:V||Y||Z,loadingText:"Waiting transaction...",onCancel:()=>{H&&H(),J&&J(),ee&&ee()}})]})})})}let ei=e=>{let{signers:r,threshold:t,chainId:s,isCurrent:n}=e;return(0,a.jsxs)("div",{className:"flex gap-4 my-6",children:[(0,a.jsxs)("div",{className:"flex-col gap-1 inline-flex",children:[(0,a.jsxs)("p",{className:v.r.label,children:[n?"CURRENT":"NEW"," SAFE SIGNERS"]}),r.map(e=>(0,a.jsxs)("div",{className:(0,i.cn)(v.r.textWithBorder,"inline-flex items-center gap-1"),style:v.r.textWithBorderOpacity,children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)(m(),{href:(0,f.C)(null!=s?s:1,e),target:"_blank",children:(0,a.jsx)(l.A,{size:20,className:"p-1 hover:bg-gray-100/10 rounded-md"})})]},e))]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("p",{className:v.r.label,children:[n?"CURRENT":"NEW"," THRESHOLD"]}),(0,a.jsxs)("span",{style:v.r.textWithBorderOpacity,className:v.r.textWithBorder,children:[t," of ",r.length," Signers"]})]})]})};var el=t(13851);function ed(e){let{delayPeriodEnded:r,thresholdAchieved:t,delayPeriodStarted:s,remainingTime:n}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-1 bg-terciary text-terciary-foreground text-xs font-roboto-mono rounded-lg py-2 px-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold mb-1",children:s||r?"Recovery Ongoing":"No Recovery Ongoing."}),(0,a.jsx)("p",{className:"font-medium",children:r?"Delay Period has ended. Recovery can be finalized.":t?s?(0,a.jsxs)(a.Fragment,{children:["Delay Period started."," ",(0,a.jsxs)("span",{className:"text-alert",children:["Ends in ",n]})]}):"Threshold achieved. Delay period not started.":"Delay period not started."})]}),(0,a.jsx)(el.A,{size:21})]})}let ec=(0,d.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),eu=(0,d.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function eh(e){let{link:r}=e,[t,s]=(0,o.useState)(!1),n=async()=>{navigator.clipboard.writeText(r),s(!0),await new Promise(e=>setTimeout(e,2e3)),s(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary cursor-pointer",onClick:n,children:[(0,a.jsx)("h4",{className:"text-xs font-medium font-roboto-mono underline",children:"Copy Recovery link"}),t?(0,a.jsx)(ec,{size:16}):(0,a.jsx)(eu,{size:16})]}),(0,a.jsx)("p",{className:"text-xs text-content-foreground opacity-60 mt-2 mb-6 font-medium",children:"This link is the only way to access and track this recovery process. Share it with guardians and save it for your records."})]})}let ex=e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";function em(e){let{recoveryLink:r,safeAddress:t,approvalsInfo:s,recoveryInfo:n,resetQueries:i}=e,[d,c]=(0,o.useState)(!1),{address:x,chainId:p}=(0,D.F)(),{toast:g}=(0,G.dj)(),{executeAfter:y,guardiansApprovalCount:b}=null!=n?n:{},{totalGuardianApprovals:w,guardiansThreshold:N}=null!=s?s:{},k=!!y&&0!==y&&Date.now()/1e3<y,C=!!y&&0!==y&&Date.now()/1e3>=y,T=y?function(e){let r=e-Math.floor(Date.now()/1e3);if(r<=0)return"0min";let t=Math.floor(r/86400),s=Math.floor(r%86400/3600),a=Math.floor(r%3600/60),n=[];return t>0&&n.push("".concat(t,"d")),s>0&&n.push("".concat(s,"h")),(a>0||0===n.length)&&n.push("".concat(a,"min")),n.join(" ")}(y):"",{trigger:R,isLoading:E}=function(e){let{onSuccess:r,onError:t}=e,{address:s}=(0,D.F)(),{data:a}=(0,M.G)(),{srm:n}=(0,A.u)(),i=(0,o.useCallback)(async()=>{if(!s||!a||!n)throw Error("Missing srm, signer or client");let e=n.createCancelRecoveryMetaTransaction();return[{to:e.to,data:e.data,value:e.value}]},[s,a,n]);return(0,S.n)({buildTxFn:i,onSuccess:r,onError:t})}({onSuccess:()=>{g({title:"Recovery Request canceled.",description:"All approvals have been revoked, and the process is now terminated."}),i(),c(!1)}});return(0,a.jsxs)("div",{className:"col-span-1",children:[(0,a.jsx)(ed,{delayPeriodEnded:C,thresholdAchieved:!!b||!!(w&&N&&w>=N),delayPeriodStarted:k,remainingTime:T}),(0,a.jsx)("h3",{className:"mb-2 font-bold text-sm font-roboto-mono",children:"SAFE ACCOUNT"}),(0,a.jsxs)("div",{style:v.r.textWithBorderOpacity,className:"flex items-center gap-3 opacity-60 border-b border-opacity-30 pb-2 mb-6",children:[(0,a.jsx)("p",{className:"text-2xl font-roboto-mono",children:ex(t)}),(0,a.jsx)(m(),{href:t?(0,f.C)(null!=p?p:1,t):"",target:"_blank",children:(0,a.jsx)(h,{icon:l.A,onClick:()=>{},size:18})})]}),(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(eh,{link:r}),(k||C)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{className:"text-xs font-medium font-roboto-mono",children:"Cancel Request"}),(0,a.jsx)("p",{className:"text-xs font-medium opacity-60 my-2",children:"Account owners can cancel this request at any time."}),(0,a.jsx)(u.$,{className:"font-bold text-xs rounded-xl",onClick:()=>c(!0),disabled:x!==t,children:"Cancel"})]})]}),(0,a.jsx)(j,{isOpen:d,onClose:()=>c(!1),currentStep:1,totalSteps:1,nextLabel:"Cancel Request",onNext:R,title:"Cancel Recovery Request?",description:"By canceling this recovery request, the process will be stopped immediately. Guardians will no longer be able to approve it, and the request cannot be executed. Are you sure you want to cancel?"}),(0,a.jsx)(I.A,{loading:E,loadingText:"Canceling recovery..."})]})}var ef=t(12),ep=t(30364),ev=t(86433),eg=t(67704),ey=t(46089),ej=t(24753),eb=t(78173),ew=t(70357),eN=t(691),eA="rovingFocusGroup.onEntryFocus",ek={bubbles:!1,cancelable:!0},eC="RovingFocusGroup",[eS,eT,eR]=(0,ev.N)(eC),[eE,eI]=(0,ep.A)(eC,[eR]),[eG,eD]=eE(eC),eF=o.forwardRef((e,r)=>(0,a.jsx)(eS.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(eS.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,a.jsx)(eL,{...e,ref:r})})}));eF.displayName=eC;var eL=o.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,orientation:s,loop:n=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...x}=e,m=o.useRef(null),f=(0,eg.s)(r,m),p=(0,eN.jH)(i),[v=null,g]=(0,ew.i)({prop:l,defaultProp:d,onChange:c}),[y,j]=o.useState(!1),b=(0,eb.c)(u),w=eT(t),N=o.useRef(!1),[A,k]=o.useState(0);return o.useEffect(()=>{let e=m.current;if(e)return e.addEventListener(eA,b),()=>e.removeEventListener(eA,b)},[b]),(0,a.jsx)(eG,{scope:t,orientation:s,dir:p,loop:n,currentTabStopId:v,onItemFocus:o.useCallback(e=>g(e),[g]),onItemShiftTab:o.useCallback(()=>j(!0),[]),onFocusableItemAdd:o.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:o.useCallback(()=>k(e=>e-1),[]),children:(0,a.jsx)(ej.sG.div,{tabIndex:y||0===A?-1:0,"data-orientation":s,...x,ref:f,style:{outline:"none",...e.style},onMouseDown:(0,ef.m)(e.onMouseDown,()=>{N.current=!0}),onFocus:(0,ef.m)(e.onFocus,e=>{let r=!N.current;if(e.target===e.currentTarget&&r&&!y){let r=new CustomEvent(eA,ek);if(e.currentTarget.dispatchEvent(r),!r.defaultPrevented){let e=w().filter(e=>e.focusable);eq([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),h)}}N.current=!1}),onBlur:(0,ef.m)(e.onBlur,()=>j(!1))})})}),eO="RovingFocusGroupItem",eP=o.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:t,focusable:s=!0,active:n=!1,tabStopId:i,...l}=e,d=(0,ey.B)(),c=i||d,u=eD(eO,t),h=u.currentTabStopId===c,x=eT(t),{onFocusableItemAdd:m,onFocusableItemRemove:f}=u;return o.useEffect(()=>{if(s)return m(),()=>f()},[s,m,f]),(0,a.jsx)(eS.ItemSlot,{scope:t,id:c,focusable:s,active:n,children:(0,a.jsx)(ej.sG.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:r,onMouseDown:(0,ef.m)(e.onMouseDown,e=>{s?u.onItemFocus(c):e.preventDefault()}),onFocus:(0,ef.m)(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:(0,ef.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){u.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let r=function(e,r,t){var s;let a=(s=e.key,"rtl"!==t?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===r&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===r&&["ArrowUp","ArrowDown"].includes(a)))return eM[a]}(e,u.orientation,u.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let t=x().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===r)t.reverse();else if("prev"===r||"next"===r){"prev"===r&&t.reverse();let s=t.indexOf(e.currentTarget);t=u.loop?function(e,r){return e.map((t,s)=>e[(r+s)%e.length])}(t,s+1):t.slice(s+1)}setTimeout(()=>eq(t))}})})})});eP.displayName=eO;var eM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eq(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=document.activeElement;for(let s of e)if(s===t||(s.focus({preventScroll:r}),document.activeElement!==t))return}var eB=t(19278),ez="Tabs",[eW,eK]=(0,ep.A)(ez,[eI]),e_=eI(),[e$,eU]=eW(ez),eV=o.forwardRef((e,r)=>{let{__scopeTabs:t,value:s,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:d="automatic",...c}=e,u=(0,eN.jH)(l),[h,x]=(0,ew.i)({prop:s,onChange:n,defaultProp:o});return(0,a.jsx)(e$,{scope:t,baseId:(0,ey.B)(),value:h,onValueChange:x,orientation:i,dir:u,activationMode:d,children:(0,a.jsx)(ej.sG.div,{dir:u,"data-orientation":i,...c,ref:r})})});eV.displayName=ez;var eH="TabsList",eQ=o.forwardRef((e,r)=>{let{__scopeTabs:t,loop:s=!0,...n}=e,o=eU(eH,t),i=e_(t);return(0,a.jsx)(eF,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:(0,a.jsx)(ej.sG.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:r})})});eQ.displayName=eH;var eY="TabsTrigger",eJ=o.forwardRef((e,r)=>{let{__scopeTabs:t,value:s,disabled:n=!1,...o}=e,i=eU(eY,t),l=e_(t),d=e0(i.baseId,s),c=e1(i.baseId,s),u=s===i.value;return(0,a.jsx)(eP,{asChild:!0,...l,focusable:!n,active:u,children:(0,a.jsx)(ej.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...o,ref:r,onMouseDown:(0,ef.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:(0,ef.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:(0,ef.m)(e.onFocus,()=>{let e="manual"!==i.activationMode;u||n||!e||i.onValueChange(s)})})})});eJ.displayName=eY;var eX="TabsContent",eZ=o.forwardRef((e,r)=>{let{__scopeTabs:t,value:s,forceMount:n,children:i,...l}=e,d=eU(eX,t),c=e0(d.baseId,s),u=e1(d.baseId,s),h=s===d.value,x=o.useRef(h);return o.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(eB.C,{present:n||h,children:t=>{let{present:s}=t;return(0,a.jsx)(ej.sG.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!s,id:u,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&i})}})});function e0(e,r){return"".concat(e,"-trigger-").concat(r)}function e1(e,r){return"".concat(e,"-content-").concat(r)}eZ.displayName=eX;var e2=eV,e3=eQ,e6=eJ,e4=eZ;let{bL:e5}=s,e8=o.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(e3,{ref:r,className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 items-center justify-center rounded-lg p-1",t),...s})});e8.displayName=e3.displayName;let e7=o.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(e6,{ref:r,className:(0,i.cn)("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow",t),...s})});e7.displayName=e6.displayName;let e9=o.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(e4,{ref:r,className:(0,i.cn)("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",t),...s})});e9.displayName=e4.displayName;var re=t(93484),rr=t(33452),rt=t(45970),rs=t(74663),ra=t(45514),rn=t(57447);let ro=(0,i.cn)("data-[state=active]:bg-secondary","data-[state=active]:text-secondary-foreground","data-[state=active]:opacity-100");function ri(){var e;let{safeAddress:r,newOwners:t,newThreshold:s,chainId:l,recoveryLink:d}=(0,rr.A)(),{recoveryInfo:c}=(0,R.k)(r,l),{chainId:u,address:h,isConnecting:x}=(0,D.F)(),[m,f]=(0,o.useState)(1),[p,g]=(0,o.useState)(3);(0,o.useEffect)(()=>{u===rn.G.id&&g(1)},[u]);let{switchChain:y}=(0,ra.R)(),j=h&&c&&"0"!==c.newThreshold.toString()&&u?(0,rt.g)({safeAddress:h,newOwners:c.newOwners,newThreshold:Number(c.newThreshold),chainId:u.toString()}):void 0,b=null!=j?j:d,w=!b,N=j?h:void 0,k=c&&j?c.newOwners:void 0,C=c&&j?Number(c.newThreshold):void 0,S=null!==(e=null!=r?r:N)&&void 0!==e?e:h,E=null!=t?t:k,I=null!=s?s:C,G=null!=l?l:u,{owners:F,safeThreshold:L}=(0,R.k)(S,G),{delayPeriod:O}=(0,A.u)({safeAddress:S,chainId:G}),{data:P}=function(e){let{safeAddress:r,newOwners:t,newThreshold:s,chainId:a}=e,{chainId:n}=(0,D.F)(),{guardians:o,threshold:i}=(0,R.k)(r,a),{srm:l}=(0,A.u)({safeAddress:r,chainId:a}),d=null!=a?a:n,c=(0,q.e)({chainId:d});return(0,re.I)({queryKey:["approvalsInfo",r,t,s],queryFn:async()=>{if(!r||!t||!s||!o||!l||!d||!c)throw Error("A needed parameter is not available");let e=(await c.multicall({contracts:o.map(e=>({address:l.moduleAddress,abi:T.F,functionName:"hasGuardianApproved",args:[r,e,t,BigInt(s)]}))})).map(e=>"success"===e.status&&e.result),a=(0,H.kR)(d,r.toLowerCase()),n=o.map((r,t)=>{var s;return{nickname:null!==(s=(0,H.cL)(r,a))&&void 0!==s?s:"Guardian ".concat(t+1),address:r,status:e[t]?"Approved":"Pending"}}),u=n.filter(e=>"Approved"===e.status).length,h=n.filter(e=>"Pending"===e.status).map(e=>e.address);return{guardiansApprovals:n,totalGuardianApprovals:u,guardiansThreshold:i,pendingGuardians:h}},enabled:!!r&&!!t&&!!s&&!!o&&!!l&&!!d})}({safeAddress:S,newOwners:E,newThreshold:I,chainId:G}),M=!b&&h,B=!b&&!h&&!x;(0,o.useEffect)(()=>{d&&l&&u&&u!==l&&y({chainId:l})},[y,d,l,u]);let z=(0,rs.jE)(),W=()=>{z.invalidateQueries({queryKey:["approvalsInfo",S,E,I]}),z.invalidateQueries({queryKey:["recoveryInfo",G,S]}),z.invalidateQueries({queryKey:["guardians",G,S]}),z.invalidateQueries({queryKey:["threshold",S]})};return B?(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center mx-8",children:(0,a.jsxs)("div",{className:"max-w-2xl text-center",children:[(0,a.jsx)("h2",{className:"text-2xl text-primary font-bold font-roboto-mono text-center ",children:"Connect to an Account"}),(0,a.jsx)("p",{className:"text-lg font-roboto-mono text-center text-foreground mb-6 mt-4",children:"You can only manage your recovery guardians, threshold and delay period after connecting to an account."}),(0,a.jsx)(n.ConnectWalletButton,{})]})}):(0,a.jsx)(a.Fragment,{children:void 0!==M?(0,a.jsx)("div",{className:"flex flex-col flex-1 mx-8",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)(e5,{defaultValue:M?"settings":"management",className:"flex flex-col w-full",children:[(0,a.jsxs)(e8,{className:"bg-content-background p-1 shadow-md rounded-xl mt-12 mb-3 self-end",children:[(0,a.jsx)(e7,{value:"management",className:(0,i.cn)(v.r.baseTab,ro),children:"Recovery Process"}),(0,a.jsx)(e7,{value:"settings",className:(0,i.cn)(v.r.baseTab,ro),children:"Recovery Settings"})]}),(0,a.jsx)(e9,{value:"management",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsx)(em,{recoveryLink:null!=b?b:"",safeAddress:S,approvalsInfo:P,recoveryInfo:c,resetQueries:W}),(0,a.jsx)(eo,{safeSigners:F,safeThreshold:L,safeAddress:S,newOwners:E,newThreshold:I,delayPeriod:null!=O?O:"",isLinkRequired:w,approvalsInfo:P,recoveryInfo:c,resetQueries:W,chainId:null!=G?G:1})]})}),(0,a.jsx)(e9,{value:"settings",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsx)(em,{recoveryLink:null!=b?b:"",safeAddress:S,approvalsInfo:P,recoveryInfo:c,resetQueries:W}),(0,a.jsx)(Y,{threshold:m,delayPeriod:p,onThresholdChange:f,onDelayPeriodChange:g,resetQueries:W})]})})]})})}):(0,a.jsx)(Z,{})})}},67939:(e,r,t)=>{"use strict";t.d(r,{A:()=>c});var s=t(98339),a=t(8890),n=t(70459),o=t(54871);t(58563);var i=t(75447),l=t(67341),d=t.n(l);function c(e){let{title:r,description:t,addresses:l}=e,{chainId:c}=(0,i.F)();return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:a.r.modalSectionTitle,children:r}),t&&(0,s.jsx)("p",{className:a.r.modalSectionDescription,children:t}),(0,s.jsx)("div",{className:"inline-flex flex-col space-y-2",children:l.map(e=>(0,s.jsx)(d(),{href:(0,n.C)(null!=c?c:1,e),target:"_blank",children:(0,s.jsxs)("div",{className:"items-center gap-2 bg-terciary inline-flex justify-between py-0.5 px-2 rounded-md hover:cursor-pointer",children:[(0,s.jsx)("p",{className:"text-primary font-roboto-mono font-medium text-xs",children:e}),(0,s.jsx)(o.A,{size:12,className:"text-primary hover:font-bold"})]},e)},e))})]})}},33452:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(58563);let a=function(){let[e,r]=(0,s.useState)({});return(0,s.useEffect)(()=>{let e=window.location.hash.substring(1),t={};if(!e){r(t);return}for(let r of e.split("&")){let[e,s]=r.split("=");"safeAddress"===e&&s&&(t.safeAddress=s),"newOwners"===e&&s&&(t.newOwners=s.split(",")),"newThreshold"===e&&s&&(t.newThreshold=Number(s)),"chainId"===e&&s&&(t.chainId=Number(s))}t.recoveryLink=t.safeAddress&&t.newOwners&&t.newThreshold?window.location.href:void 0,r(t)},[]),e}},45970:(e,r,t)=>{"use strict";t.d(r,{g:()=>s,l:()=>a});let s=e=>{let r="";{let e=window.location.protocol,t=window.location.host;r="".concat(e,"//").concat(t)}let t=new URLSearchParams;return t.append("safeAddress",e.safeAddress),t.append("newOwners",e.newOwners.join(",")),t.append("newThreshold",e.newThreshold.toString()),t.append("chainId",e.chainId),"".concat(r,"/manage-recovery/dashboard#").concat(t.toString())},a=e=>{try{let r=e.split("#")[1];if(!r)return!1;let t=new URLSearchParams(r),s=t.get("safeAddress"),a=t.get("newOwners"),n=t.get("newThreshold"),o=t.get("chainId");if(!s||!a||!n||!o)return!1;let i=a.split(",");if(0===i.length)return!1;let l=parseInt(n,10);if(isNaN(l)||l<=0||l>i.length)return!1;return!0}catch(e){return console.error("Error validating link:",e),!1}}}},e=>{var r=r=>e(e.s=r);e.O(0,[401,835,264,341,769,1,270,956,789,865,358],()=>r(21087)),_N_E=e.O()}]);